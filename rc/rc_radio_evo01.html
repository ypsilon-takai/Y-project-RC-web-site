<html>
<head>
<TITLE>Y-project</TITLE>
	<meta http-equiv="Content-Language" content="ja">
	<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
	<LINK href="../data/antinn.css" type=text/css rel=stylesheet>
	<LINK href="../data/tnanchor.css" type=text/css rel=stylesheet>
	<LINK href="../data/tnclass.css" type=text/css rel=stylesheet>
	<LINK href="../data/tnstyle.css" type=text/css rel=stylesheet>
	<LINK href="../data/tntable.css" type=text/css rel=stylesheet>
	<LINK href="../data/yadd.css" type=text/css rel=stylesheet>
</HEAD>
<BODY>

<div class="title">
&nbsp;
<img src="img/mini/evo-front2.jpg" align="center" alt="EVO画像 全体" >
</div>


<h2><a name="program1">3. Evo9プログラミング 論理編</a></h2>
<p>
  Evoはコンピュータプロポなんで、「プログラムする」のですが、先にも書いたように「プログラムしないと使えない」という特徴があります。<br>
  <br>
  で、このプログラムの根本的な考え方がが日本のプロポとは違っていて、最初は
  かなり戸惑うかもしれません。
  
</p>

<h3><a name="program1-arch">3.1. Evo処理アーキテクチャ</a></h3>

<p>
指令は下のような流れで指からサーボへ届きます。
</p>

<p><em>
指 -> Widget -> Control -> (Mixer) -> サーボ
</em></p>
<p>
Evoのプログラミングは、この流れの中の「WidgetとControlの関係」「Mixerの設定」「Mixerの出力をどのサーボにだすかへの設定」を行なうことになのです。加えて、「Mixerの定義」もしないといけません。
</p>
<p>
まずは、流れの中に出てくるそれぞれの用語を説明することで、Evoのアーキテクチャの概要をつかんでいただけると思います。
</p>

<h4>Widget(ウィジェット)</h4>
<p>
Evo本体についている、スイッチ/スライダーなど、下のほうについている押しボタンと3Dアジャスター以外のものを指します。スティックが2本にスライダーが2つ、3ポイントスイッチが2つ、2ポイントスイッチが2つ(オプションでさらに2つ)、押しボタンスイッチが2つ、これだけあります。
人はこれを操作してEvoに指令を伝えます。
</p>

<h4>Control(コントロール)</h4>
<p飛行機用の場合、>以下のようなコントロールがあります。</p>
<br>
<ul>
<li>Ailron(エルロン)</li>
<li>Elevator(エレベーター)</li>
<li>Rudder(ラダー)</li>
<li>Throttle(スロットル)</li>
<li>Spoiler(スポイラー)</li>
<li>Flap(フラップ)</li>
<li>L.gear(ランディング ギア)</li>
<li>Tow hook(トウフック)</li>
<li>Brake(ブレーキ)</li>
<li>Gyro(ジャイロ)</li>
<li>Mixture(混合気)</li>
<li>AUX 1(その他１)</li>
<li>AUX 2(その他２)</li>
</ul>
<p>
Widgetからの入力は上記のどれかにアサインすることで、次の段のMixerまたはサーボに入力することができるようになります。
</p>
<p>コントロールには特別な機能がついています。<br>
１つはトリム。これは説明書のどこにも書いてありませんが、Controlの出口直前にトリムが作用すると考えるのが自然です。ミキサーへの出力にトリムを含めるか含めないかを選択できます。<br>
エルロンディファレンシャルもコントロールについている機能と考えるとすっきりします。エルロンの左右の並びを判断しているんですが、これについての詳しいことは後ほど。<br>
エルロン-ラダーミキシング(コンビスイッチと読んでます)。これも後で詳しく説明します。<br>
フラップとスポイラーには固定値を割り当てる機能があります。
</p>

<h4>Mixer(ミキサー)
</h4>

<p>
ミキサーは、5入力-多出力の箱と考えることができます。最大５つまでのControlからの入力を合成してサーボに送ります。それぞれの入力に対して量や方向などを設定することができます。真のミキサーだという感じですよね。<br>
ミキサーの定義と設定は別々にするようになっていて、定義のほうはグローバルな設定になっていて、すべてのモデルで共有しています。定義に設定するのは、「入力コントロールの種別」「ミキサースイッチ」「入力方式」で、設定時には、「動作量」を決定します。
指令の流れの中で、ミキサーを省略することもできます。この場合、コントロールからの出力は直接サーボに届くことになります。
</p>

<h3><a name="program1-spec">
3.2　エルロンの特殊性
</a></h3>
Evoのエルロンの扱いは、ちゃんと理解するのにいくつかの資料を確認する必要があったほど特殊なので、一つの章にしてしまいます。
<p>
エルロンに複数のサーボ割り当てて使う場合、左右のサーボは逆に動いているわけですが、
まったく逆の動作をしているわけではありません。エルロンディファレンシャルを使うからです。<br>
ディファレンシャルというのは、エルロンの動作を上下で違う寮にする機能なので、たとえば右に切った場合、右用の出力と左用出力
では動作量が違うということになるのです。
<br>
これを実現するためには、右用と左用の別のミキサーを定義してそれぞれにサーボを
割り当てるという手もあるのではないかと思うのですが、そうした場合、右用のミキサーと左用のミキサーの
調整が煩雑になってしまうことが考えられます。
そこでMpxは、そのようなことからユーザーを解放するために、
<blockquote>
１番のサーボから順に見て、Mixer経由の物も含めて、最初のエルロンControlの出力を左、
次を右、以降順番に
</blockquote>
という規則を採用し、実際に送信機から出力されるエルロンの信号をその規則にあわせて変更するという方式を採用したのです。
</p>

<h4>
<b>★この規則の落とし穴</b>
</h4>
<p>この規則は、始めから理解して使えば引っかかったりしないのですが、落とし穴になることがあります。<br>
例えば、ラダー用ミキサーにエルロンの入力があって、サーボが　エルロン１、ラダー、エレベータ、エルロン２の順に接続してある場合、間のラダーへ出力が右用になってしまうため、両方のエルロンが左用の動きをしてしまいます。サーボにリバースをかければうまくいきそうですが、ディファレンシャルがうまく働きません。
これは、既存の機体の送信機を他のものからEvoに変更したときに問題になる場合があります。そんなときには、受信機とサーボとの接続を変更するなどの対処必要が出てしまいます。<br>
また、そうでなくても、今までのとおりのつもりで接続してしまうとエルロンディファレンシャルの調整がうまくできずにはまってしまうかもしれません。
</p>

<h4>
★特別なミキサー エルロンディファレンシャルとコンビスイッチ
</h4>
<p>この規則をとった場合に問題になるのは、エルロンディファレンシャル(A-Diff)とエルロン−ラダー(A-R)ミキシングの実現です。A-Diffは、実際にミキサーをサーボに接続するまで左右が決まらないため、装置としての特殊なサポートがない場合、設定の手順が特殊なものになってしまいます。また、A-Rミキシングはエルロンの出力を1つしか使用しないため、落とし穴の節であげたような問題を起こしやすいのです。<br>
この問題の解としてMpxが用意したのが、特別なミキサー、Air-DiffとCombiSwitchです。<br>
Air-Diffは、他のミキサーとは独立して、左右のシーケンスに沿って適切にディファレンシャル処理を行なうようになっています。また、CombiSwitchは、左右のシーケンスに影響を与えずに、A-Rミキシングを実現します。<br>
実際のところ、この2つは、ミキサーに分類されてはいますが、Controlのもっている機能だと考えるべきなのではないかとおもいます。その証拠に、ミキサーへエルロンコントロールの入力をするときに トリムを除外(-Tr指定)すると、ディファレンシャルの影響もなくなります。
</p>
<br>
<center>
<a href="rc_radio_evo00.html"> 戻る</a>
</center>



</body>
</html>


